<html>
<head>

<link href="style.css" rel="stylesheet">

<script src="https://code.jquery.com/jquery-3.5.1.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" type="text/javascript"></script>

<script src="main.js" type="text/javascript"></script>

</head>
<body onLoad="init ()">
  <div id="menu" class="menu">
    <div class="icon" onclick="showNewSession ()">Record Session</div>
    <div class="icon" onclick="showPlaySession ()">Playback Session</div>
    <div class="icon" onclick="showManageSessions ()">Manage Sessions</div>
    <div class="icon" onclick="showScriptRunner ()">Script Runner</div>
    <div class="eberlybanner">Eberly Etherpad Drydock</div> 
  </div>
  <div id="right" class="right">
    <div id="session" class="config"></div>


    <div id="newsession" class="config" style="display: none; display: flex; flex-direction: row;">

      <div id="step1" style="flex:1; width: 33%;">
        Nr of sesssions/users (max 4): 
        <input type="number" id="sessioncount" onkeyup="changeNrSessions()" oninput="changeNrSessions()" min="1" max="4" value="1" /><br>
        Session/Experiment name:
        <input type="text" id="sessionname" onkeyup="changeSessionName()" value="New Session" /><br>
        Text to reproduce:
        <div id="text" class="textable" contenteditable="true"></div>
        <button class="button" onclick="nextNames()">Next ...</button>
      </div>

      <div id="step2" style="flex: 1; width: 33%; border-left: 1px solid #c1bebe; padding-left: 10px; display: none;">
        <div id="name1container" class="textinputrow">User 1 Name: <input type="text" id="name1" value="" /></div>
        <div id="name2container" class="textinputrow">User 2 Name: <input type="text" id="name2" value="" /></div>
        <div id="name3container" class="textinputrow">User 3 Name: <input type="text" id="name3" value="" /></div>
        <div id="name4container" class="textinputrow">User 4 Name: <input type="text" id="name4" value="" /></div>
        <button class="button" onclick="previousNames()">Previous</button>
        <button class="button" onclick="nextStart()">Next ...</button>
      </div>

      <div id="step3" style="flex:1; width: 33%; border-left: 1px solid #c1bebe; padding-left: 10px; display: none;">
        Please hand each of your participants one of the URLs. When you click Start you will see a monitoring session below, which will show you the partipant's activity.
        <ul style="width: 100%; min-width: 500px;">
          <li id="session1url"></li>
          <li id="session2url"></li>
          <li id="session3url"></li>
          <li id="session4url"></li>
        </ul>
        <button class="button" onclick="previousStart()">Previous</button>
        <button class="button" onclick="startSessions()">Start</button>
        <button class="button" onclick="startOver()">Start Over</button>
      </div>

    </div>


    <div id="playsession" class="config" style="display: none">
      <select id="pads" multiple="multiple" class="list">
      </select>
      <button class="button" onclick="playSession()">Play</button>
    </div>

    
    <div id="managesessions" class="config" style="display: none">
      
    </div>
    
    <div id="sessioninfo" class="sessioninfo"></div>


    <div id="pad" class="etherpad" style="display: flex; flex-direction: row;">
      <div style="flex: 1;">
        <iframe id="etherpad" frameborder="0" src="" width="100%" height="100%" sandbox="allow-same-origin allow-scripts"></iframe>
      </div>
      <div id="scriptrunner" class="scriptrunner">

        <div class="playpanel">
          <button class="button" onClick="runScript()">Run</button>
          <button class="button" onClick="getLink()">Get Link</button>
        </div>
        
        <hr class="separator" />
        
        <div class="playpanel">
          <button class="button" onClick="saveScript()">Save</button>
          <button class="button" onClick="clearScript()">New</button>
          <button class="button" onClick="loadScript()">Load</button>
          <br /> 
          <input id="scriptname" type="text" class="tinput" />

          <select id="scripts" multiple="multiple" class="scriptlist">
          </select>
          <br /> 
        </div>
        
        <hr class="separator" />

        <div class="playpanel">
          <div class="dropdown">
            <button class="dropbtn" onClick="openDropdown ()">Available Actions</button>
            <div class="dropdown-arrowdown">&#9660;</div>
            <div class="dropdown-content">
              <a href="#" onClick="setAction ('setText')">setText</a>
              <a href="#" onClick="setAction ('addTextAtEnd')">addTextAtEnd</a>
              <a href="#" onClick="setAction ('addTextAtStart')">addTextAtStart</a>
              <a href="#" onClick="setAction ('replaceFirst')">replaceFirst</a>
              <a href="#" onClick="setAction ('replaceAll')">replaceAll</a>
            </div>
          </div>
          <div id="action" class="actionfield"></div>
          <div id="argument1-help">Argument 1:</div>
          <input id="argument1" type="text" class="tinput" />
          <div id="argument2-help">Argument 2:</div>
          <input id="argument2" type="text" class="tinput" />
          Timestamp (milli, e.g. 1000):
          <input id="timestamp" type="text" class="tinput" value="1000"></input>

          <button class="button" onClick="addAction()">Add</button>
          <!--
          <button class="button" onClick="deleteAction()">Delete</button>          
          -->
        </div>        

        <div id="actionlist" class="actionlist">
          <ol id="sortable">
          </ol>
        </div>

      </div>
    </div>

    <div id="status" class="status">&nbps;</div>

  </div>
  <div id="scrim" class="scrim">
    <div id="scrimmessage" class="loading">Loading ...</div>
  </div>
</body>
</html>
